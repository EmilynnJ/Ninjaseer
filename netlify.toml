# Netlify Configuration for SoulSeer
# Base directory is set to soulseer/frontend where package.json with Next.js is located

[build]
  base = "soulseer/frontend"
  command = "npm install --legacy-peer-deps && npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"
  SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_API_URL"

# Next.js Runtime Plugin for full SSR support
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Environment variables (set these in Netlify dashboard)
# NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
# CLERK_SECRET_KEY
# NEXT_PUBLIC_API_URL

# Redirects for API calls to backend
[[redirects]]
  from = "/api/*"
  to = "https://your-backend-url.com/api/:splat"
  status = 200
  force = true